(this.webpackJsonptwitter=this.webpackJsonptwitter||[]).push([[0],{50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),r=a(32),s=a.n(r),i=a(6),o=a(22),u=a(7),l=a(8),j=a.n(l),b=a(13),d=a(24);a(41),a(53),a(52);d.a.initializeApp({apiKey:"AIzaSyAN3MEMMsJJtPK0DoyrCgcA4Lioaps3uv8",authDomain:"twitter-80a8f.firebaseapp.com",projectId:"twitter-80a8f",storageBucket:"twitter-80a8f.appspot.com",messagingSenderId:"636026115355",appId:"1:636026115355:web:ba863522362cdfa1d8efbe"});var h=d.a,p=d.a.auth(),O=d.a.firestore(),f=d.a.storage(),m=a(1),x=function(e){var t=e.userObj,a=e.refreshuser,c=e.setIsLoggedIn,r=Object(n.useState)(t.displayName?t.displayName:""),s=Object(i.a)(r,2),o=s[0],l=s[1],d=Object(n.useState)(""),h=Object(i.a)(d,2),O=h[0],f=h[1],x=Object(u.f)(),g=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),f(""),""!==o){e.next=5;break}return f("Name can't be empty"),e.abrupt("return");case 5:if(t.displayName===o){e.next=15;break}return e.prev=6,e.next=9,t.updateProfile({displayName:o});case 9:a(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("main",{className:"profileWrapper wrapper",children:[Object(m.jsxs)("form",{onSubmit:g,children:[Object(m.jsx)("input",{type:"text",placeholder:"Display Name",value:o,onChange:function(e){var t=e.target.value;l(t.trim())},className:"factoryInput"}),Object(m.jsx)("input",{type:"submit",value:"Update Profile",className:"factoryInput submitBtn"}),O&&Object(m.jsx)("span",{className:"error",children:O})]}),Object(m.jsx)("button",{className:"profileBtn",onClick:function(){p.signOut(),x.push("/"),c(!1)},children:"Log Out"})]})},g=function(e){var t=e.error,a=e.setError,c=Object(n.useState)(""),r=Object(i.a)(c,2),s=r[0],o=r[1],u=Object(n.useState)(""),l=Object(i.a)(u,2),d=l[0],h=l[1],O=Object(n.useState)(!0),f=Object(i.a)(O,2),x=f[0],g=f[1],v=function(e){var t=e.target,a=t.name,n=t.value;"email"===a?o(n):"password"===a&&h(n)},w=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!x){e.next=7;break}return e.next=5,p.createUserWithEmailAndPassword(s,d);case 5:e.next=9;break;case 7:return e.next=9,p.signInWithEmailAndPassword(s,d);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),a(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("form",{onSubmit:w,className:"authForm",children:[Object(m.jsx)("input",{name:"email",type:"email",placeholder:"Email",value:s,required:!0,onChange:v,className:"factoryInput"}),Object(m.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:d,required:!0,onChange:v,className:"factoryInput"}),Object(m.jsx)("input",{type:"submit",value:x?"Create Account":"Log In",onClick:w,className:"factoryInput submitBtn"}),Object(m.jsx)("span",{className:"error",children:t})]}),Object(m.jsxs)("span",{className:"authSwitch",onClick:function(){g((function(e){return!e}))},children:["Switch to ",x?"Log In":"Create Account"]})]})},v=a(11),w=a(20),y=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],r=function(){var e=Object(b.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.name,e.prev=1,"google"===a?n=new h.auth.GoogleAuthProvider:"github"===a&&(n=new h.auth.GithubAuthProvider),e.next=5,p.signInWithPopup(n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),c(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("main",{className:"authWrapper wrapper",children:[Object(m.jsx)("div",{className:"iconWrapper",children:Object(m.jsx)(v.a,{icon:w.e,size:"3x",className:"twitterIcon"})}),Object(m.jsx)(g,{error:a,setError:c}),Object(m.jsxs)("div",{className:"authBtns",children:[Object(m.jsxs)("button",{className:"authBtn",name:"google",onClick:r,children:[Object(m.jsx)(v.a,{icon:w.c,size:"lg"}),"Continue With Google"]}),Object(m.jsxs)("button",{className:"authBtn",name:"github",onClick:r,children:[Object(m.jsx)(v.a,{icon:w.b,size:"lg"}),"Continue With Github"]})]})]})},N=a(35),I=a(18),k=function(e){var t=e.tweetObj,a=e.isOwner,c=Object(n.useState)(!1),r=Object(i.a)(c,2),s=r[0],o=r[1],u=Object(n.useState)(t.text),l=Object(i.a)(u,2),d=l[0],h=l[1],p=function(){o((function(e){return!e}))},x=function(){var e=Object(b.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this tweet?")){e.next=7;break}return e.next=4,O.doc("tweets/".concat(t.id)).delete();case 4:if(""===t.attachmentUrl){e.next=7;break}return e.next=7,f.refFromURL(t.attachmentUrl).delete();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,O.doc("tweets/".concat(t.id)).update({text:d});case 3:o(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"tweet",children:s?Object(m.jsx)("div",{className:"tweetContainer",children:Object(m.jsxs)("form",{onSubmit:g,className:"tweetEdit",children:[Object(m.jsx)("input",{type:"text",placeholder:"Edit Your Tweet",value:d,required:!0,onChange:function(e){var t=e.target.value;h(t)},className:"factoryInput editInput"}),Object(m.jsx)("input",{type:"submit",value:"Update",className:"factoryInput factorySubmit"}),Object(m.jsx)("input",{type:"reset",value:"Cancel",onClick:p,className:"factoryInput factoryCancle"})]})}):Object(m.jsxs)("div",{className:"tweetContainer",children:[Object(m.jsx)("h4",{children:t.text}),t.attachmentUrl&&Object(m.jsx)("img",{className:"factoryImg",src:t.attachmentUrl,alt:"Profile",width:"50px",height:"50px"}),a&&Object(m.jsxs)("div",{className:"factoryBtns",children:[Object(m.jsx)("button",{className:"factoryBtn editBtn",onClick:p,title:"Edit Tweet",children:Object(m.jsx)(v.a,{icon:I.b})}),Object(m.jsx)("button",{className:"factoryBtn deleteBtn",onClick:x,title:"Delete Tweet",children:Object(m.jsx)(v.a,{icon:I.g})})]})]})})},C=a(55),S=function(e){var t=e.userObj,a=Object(n.useState)(""),c=Object(i.a)(a,2),r=c[0],s=c[1],o=Object(n.useState)(""),u=Object(i.a)(o,2),l=u[0],d=u[1],h=Object(n.useState)(""),p=Object(i.a)(h,2),x=p[0],g=p[1],w=function(){var e=Object(b.a)(j.a.mark((function e(a){var n,c,i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n="",""===l){e.next=10;break}return c=f.ref().child("".concat(t.uid,"/").concat(Object(C.a)())),e.next=6,c.putString(l,"data_url");case 6:return i=e.sent,e.next=9,i.ref.getDownloadURL();case 9:n=e.sent;case 10:return o={text:r,creatorId:t.uid,createdAt:Date.now(),attachmentUrl:n},e.next=13,O.collection("tweets").add(o);case 13:s(""),d(""),g("");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("form",{onSubmit:w,className:"factoryContainer",children:[Object(m.jsxs)("section",{className:"factoryInput__container",children:[Object(m.jsx)("input",{type:"text",placeholder:"What's on Your Mind?",value:r,maxLength:120,onKeyUp:function(e){e.target.value.length>=120&&g("120\uc790 \uc774\ub0b4\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694.")},onChange:function(e){g("");var t=e.target.value;s(t)},className:"factoryInput"}),x&&Object(m.jsx)("span",{className:"error",children:x}),Object(m.jsx)("input",{type:"submit",value:"Tweet",className:"factoryInput submitBtn"})]}),Object(m.jsxs)("section",{className:"factoryAttachment__container",children:[Object(m.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],a=new FileReader;a.onloadend=function(e){var t=e.currentTarget.result;d(t)},a.readAsDataURL(t)}}),Object(m.jsxs)("label",{htmlFor:"attach-file",children:[Object(m.jsx)(v.a,{icon:I.e}),"Add Photo"]}),l&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("img",{src:l,alt:"Profile",width:"50px",height:"50px",className:"attachmentImg"}),Object(m.jsx)("button",{onClick:function(){d("")},className:"factoryInput attachmentClear",children:"Clear Photo"})]})]})]})},A=function(e){var t=e.userObj,a=Object(n.useState)([]),c=Object(i.a)(a,2),r=c[0],s=c[1],o=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.collection("tweets").orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(N.a)({id:e.id},e.data())}));s(t)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o()}),[]),Object(m.jsxs)("main",{className:"homeWrapper wrapper",children:[Object(m.jsx)(S,{userObj:t}),Object(m.jsx)("section",{className:"displayContainer",children:r.map((function(e){return Object(m.jsx)(k,{tweetObj:e,isOwner:e.creatorId===t.uid},e.id)}))})]})},B=function(e){var t=e.userObj,a=Object(n.useState)(!1),c=Object(i.a)(a,2),r=c[0],s=c[1],u=function(){document.documentElement.classList.add("transition"),window.setTimeout((function(){document.documentElement.classList.remove("transition")}),500)};return Object(m.jsx)("nav",{className:"Navigation",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)(o.c,{to:"/",children:"Home"})}),Object(m.jsxs)("li",{children:[Object(m.jsxs)(o.c,{to:"/profile",children:[t.displayName,"'s Profile"]}),Object(m.jsx)("button",{className:"darkModeBtn",value:"DarkMode",onClick:function(){s((function(e){return!e})),u(),document.documentElement.setAttribute("data-theme",r?"light":"dark")},children:r?Object(m.jsx)(v.a,{icon:I.d}):Object(m.jsx)(v.a,{icon:I.f})})]})]})})},L=function(e){var t=e.refreshuser,a=e.isLoggedIn,n=e.userObj,c=e.setIsLoggedIn;return Object(m.jsx)(o.a,{basename:"https://hannah26hannah.github.io/react-twitter-clone",children:Object(m.jsxs)(o.b,{children:[a&&Object(m.jsx)(B,{userObj:n}),Object(m.jsx)(u.c,{children:a?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(u.a,{exact:!0,path:"/",children:Object(m.jsx)(A,{userObj:n})}),Object(m.jsx)(u.a,{exact:!0,path:"/profile",children:Object(m.jsx)(x,{userObj:n,setIsLoggedIn:c,refreshuser:t})})]}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(u.a,{exact:!0,path:"/",children:Object(m.jsx)(y,{})})})})]})})},P=function(){return Object(m.jsxs)("footer",{className:"footer",children:[Object(m.jsxs)("h6",{children:["\xa9 Hannah26Hannah ",(new Date).getFullYear()]}),Object(m.jsxs)("ul",{children:[Object(m.jsx)("a",{href:"https://github.com/hannah26hannah",children:Object(m.jsx)("li",{children:Object(m.jsx)(v.a,{icon:w.b})})}),Object(m.jsx)("a",{href:"mailto: guaranteed.by.prismo@gmail.com",children:Object(m.jsx)("li",{children:Object(m.jsx)(v.a,{icon:I.c})})}),Object(m.jsx)("a",{href:"https://hannah26hannah.github.io/",children:Object(m.jsx)("li",{children:Object(m.jsx)(v.a,{icon:I.a})})}),Object(m.jsx)("a",{href:"https://www.linkedin.com/in/jeongwon-yoo/",children:Object(m.jsx)("li",{children:Object(m.jsx)(v.a,{icon:w.d})})}),Object(m.jsx)("a",{href:"https://uiyoji-journal.tistory.com/",children:Object(m.jsx)("li",{children:Object(m.jsx)(v.a,{icon:w.a})})})]})]})};var E=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),s=Object(i.a)(r,2),o=s[0],u=s[1],l=Object(n.useState)(null),j=Object(i.a)(l,2),b=j[0],d=j[1];return Object(n.useEffect)((function(){p.onAuthStateChanged((function(e){e?(d(e),u(!0)):d(null),c(!0)}))}),[]),Object(m.jsxs)(m.Fragment,{children:[a?Object(m.jsx)(L,{isLoggedIn:o,setIsLoggedIn:u,userObj:b,refreshuser:function(){var e=p.currentUser;d({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})}}):Object(m.jsx)("h1",{className:"initial",children:"Initializing ..."}),Object(m.jsx)(P,{})]})};a(50);s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(E,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.3da213ad.chunk.js.map